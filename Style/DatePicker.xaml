<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:l="http://wpflocalizeextension.codeplex.com"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="clr-namespace:Ion.Controls"
    xmlns:Data="clr-namespace:Ion.Data">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="{i:Style Key=Calendar}"/>
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="{x:Type DatePicker}" TargetType="{x:Type DatePicker}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="#11000000" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CalendarStyle">
            <Setter.Value>
                <Style TargetType="{x:Type Calendar}" BasedOn="{StaticResource {x:Type Calendar}}">
                    <Setter Property="Background" Value="{i:Theme PopupBackground}"/>
                    <Setter Property="BorderBrush" Value="{i:Theme PopupBorder}"/>
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="DisplayMode" Value="Month"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect
                                BlurRadius="8"
                                Color="{i:Theme PopupDropShadow}"
                                Opacity="0.32"
                                ShadowDepth="3"/>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Foreground" Value="{i:Theme Text}" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="IsTodayHighlighted" Value="True" />
        <Setter Property="i:XDatePicker.Placeholder" Value="{i:Text Date}" />
        <Setter Property="i:XDatePicker.PlaceholderTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock 
                        Opacity="0.4"
                        Text="{i:Bind}"
                        TextTrimming="CharacterEllipsis"/>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="i:ImageElement.Foreground" Value="{i:Theme Text}"/>
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Padding" Value="5" />
        <Setter Property="SelectedDateFormat" Value="Short" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DatePicker}">
                    <Border x:Name="PART_Root"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid i:XGrid.Columns="*,Auto"
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                            <ContentPresenter Grid.Column="0" Grid.Row="0"
                                Content="{i:Bind From=TemplatedParent, Path=(i:XDatePicker.Placeholder)}" 
                                ContentTemplate="{i:Bind From=TemplatedParent, Path=(i:XDatePicker.PlaceholderTemplate)}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                IsHitTestVisible="False"
                                Margin="{TemplateBinding Padding}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Visibility="{i:Equal DisplayDate, From=TemplatedParent, Result=Visibility}"/>
                            <DatePickerTextBox x:Name="PART_TextBox"
                                Grid.Column="0"
                                Grid.Row="0"
                                Foreground="{TemplateBinding Foreground}"
                                Focusable="{TemplateBinding Focusable}"
                                HorizontalContentAlignment="Stretch"
                                i:XTextBox.ClearButtonVisibility="Collapsed"
                                Padding="{TemplateBinding Padding}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            <i:ImageButton x:Name="PART_Button"
                                Grid.Column="1" Grid.Row="0"
                                ContentTemplate="{i:Template Key=Default}"
                                ContentVisibility="Collapsed"
                                Focusable="False"
                                Margin="0,0,5,0"
                                Source="{i:Image Key=Calendar}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            <Popup x:Name="PART_Popup"
                                AllowsTransparency="True"
                                Margin="0"
                                Placement="Bottom"
                                PlacementTarget="{i:Bind From=TemplatedParent}"
                                StaysOpen="False"
                                Width="{TemplateBinding ActualWidth}"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="BorderBrush" Value="{i:Theme TextBoxFocusedBorder}" />
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsFocused" Value="False"/>
                    <Condition Property="IsMouseOver" Value="True"/>
                </MultiTrigger.Conditions>
                <Setter Property="BorderBrush" Value="{i:Theme TextBoxMouseOverBorder}" />
            </MultiTrigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary>